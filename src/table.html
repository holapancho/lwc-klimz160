<template>
  <table class="slds-table slds-table_cell-buffer table_bordered">
    <thead>
      <tr class="slds-line-height_reset">
        <template for:each={columns} for:item="column">
          <th key={column.id} class={column.class} scope="col">
            <div class="slds-truncate" title={column.label}>{column.label}</div>
          </th>
        </template>
      </tr>
    </thead>
    <tbody>
      <template for:each={data} for:item="record" for:index="index">

        <tr key={record.id} class="slds-hint-parent">
          <template for:each={columns} for:item="column">
            <th key={column.id} class={column.class} scope="col" style="border-top: 1px solid #dddbda;">
              <c-cell record={record} column={column} oncellchange={handleCellChanged}>
              </c-cell>
            </th>
          </template>
        </tr>

        <template if:true={record.subitems}>
          <template for:each={record.subitems} for:item="subrecord">
            <tr key={subrecord.id} class="slds-hint-parent">
              <template for:each={columns} for:item="column">
                <th key={column.id} class={column.class} scope="col">
                  <c-cell record={subrecord} column={column} oncellchange={handleCellChanged}></c-cell>
                </th>
              </template>
            </tr>
          </template>
        </template>

      </template>
    </tbody>
  </table>
  <br/>
</template>